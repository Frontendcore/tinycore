(function(k){var i=true,o=false,n=null;var g=function(q,p){return q.hasOwnProperty(p)};var f=function(p,q){return Object.prototype.toString.call(p)==="[object "+q+"]"};var c=function(s,q){var p=n,r="";s=s||{};for(r in q){if(g(q,r)){p=q[r];if(f(p,"Object")){p=c(s[r],p)}s[r]=p}}return s};var b=function(p){return Array.prototype.slice.call(p)};var a=function(p,q,s){var r=null;if(p.__decorated__){return p}r=function(){try{p.apply(q,b(arguments))}catch(t){j.ErrorHandler.log(s+t.message)}};r.__decorated__=true;return r};var l={log:function(p){k.console&&k.console.error(p)}};var m=(function(){var t={};var q=0;var p={};var s={};var r=function(u){var v=u;return{subscribe:function(B,x,y){var A=0,w=0,z="";if(f(x,"Function")){B=f(B,"Array")?B:[B];for(A=B.length;w<A;w++){z=B[w];p[z]=p[z]||{};if(!p[z][v]){p[z][v]=j.debugMode?function(){x.apply(y,b(arguments))}:a(x,y,'Error publishing topic "'+z+'": ');s[v]=s[v]||[];s[v].push(z)}}}},publish:function(w,z){var x=p[w],y=null;if(x){k.setTimeout(function(){var A="";for(A in x){if(g(x,A)){x[A]({name:w,data:z})}}},0)}},unSubscribe:function(y){var y=f(y,"Array")?y:[y],w=y.length,x=n;while(w--){x=p[y[w]];if(x&&x[v]){delete x[v]}}},unSubscribeAll:function(){if(s[v]){this.unSubscribe(s[v])}}}};return{create:function(u){return c(r(++q),t[u]||{})},register:function(v,u){if(!t[v]){t[v]=u;return i}return o}}}());var e={};var d=function(p){if(!e[p]){throw new Error('Module "'+p+'" is not registered!')}};var h=function(s){var r=m.create(e[s].sSandBoxType),p=e[s].fpCreator(r),q="";if(!j.debugMode){for(q in p){if(g(p,q)&&f(p[q],"Function")){p[q]=a(p[q],p,'Error in module "'+s+'" executing method "'+q+'": ')}}}p.__sandbox__=r;return p};var j={version:"0.1.1",debugMode:o,extend:function(p){c(this,p)},register:function(r,p,q){if(!e[r]){e[r]={fpCreator:p,sSandBoxType:q||"",oInstance:n,bIsStarted:o};return i}return o},start:function(q,p){d(q);if(!e[q].bIsStarted){if(!e[q].oInstance){e[q].oInstance=this.instanciate(q)}e[q].oInstance.onStart(p);e[q].bIsStarted=i}},stop:function(p){d(p);if(e[p].bIsStarted&&e[p].oInstance){if(f(e[p].oInstance.onStop,"Function")){e[p].oInstance.onStop()}e[p].oInstance.__sandbox__.unSubscribeAll();e[p].bIsStarted=o}},instanciate:function(p){d(p);return h(p)},getModules:function(){return e},SandBox:m,ErrorHandler:l};k.TinyCore=j;if(k.define){define("TinyCore",j)}}(this));