(function(j){var h=true,n=false,m=null;var f=function(p,q){return Object.prototype.toString.call(p)==="[object "+q+"]"};var o=function(p){return f(p,"Function")};var g=function(q,r){var p="";for(p in q){if(q.hasOwnProperty(p)){r(q[p],p)}}};var c=function(q,p){q=q||{};g(p,function(s,r){if(f(s,"Object")){s=c(q[r],s)}q[r]=s});return q};var b=function(p){return Array.prototype.slice.call(p)};var a=function(p,q,s){var r=m;if(p.__decorated__){return p}r=function(){try{p.apply(q,b(arguments))}catch(t){i.ErrorHandler.log(s+t.message)}};r.__decorated__=h;return r};var k={log:function(p){j.console&&j.console.error(p)}};var l=(function(){var t={};var q=0;var p={};var s={};var r=function(u){var v=u;return{subscribe:function(B,x,y){var A=0,w=0,z="";if(o(x)){B=f(B,"Array")?B:[B];for(A=B.length;w<A;w++){z=B[w];p[z]=p[z]||{};if(!p[z][v]){p[z][v]=i.debugMode?function(){x.apply(y,b(arguments))}:a(x,y,'Error publishing topic "'+z+'": ');s[v]=s[v]||[];s[v].push(z)}}}},publish:function(w,y){var x=p[w];if(x){j.setTimeout(function(){g(x,function(z){z({name:w,data:y})})},0)}},unSubscribe:function(y){var y=f(y,"Array")?y:[y],w=y.length,x=m;while(w--){x=p[y[w]];if(x&&x[v]){delete x[v]}}},unSubscribeAll:function(){if(s[v]){this.unSubscribe(s[v])}}}};return{build:function(u){return c(r(++q),t[u]||{})},register:function(v,u){if(!t[v]){t[v]=u;return h}return n}}}());var e={};var d=function(p){if(!e[p]){throw new Error('Module "'+p+'" is not registered!')}};var i={version:"0.3.0",debugMode:n,extend:function(p){c(this,p)},register:function(r,p,q){if(!e[r]){if(!o(p)){throw new Error('The creator of module "'+r+'" is not a function!')}e[r]={fpCreator:p,sSandBoxType:q||"",oInstance:m,bIsStarted:n};return h}return n},start:function(q,p){d(q);if(!e[q].bIsStarted){if(!e[q].oInstance){e[q].oInstance=this.instanciate(q)}e[q].oInstance.onStart(p);e[q].bIsStarted=h}},stop:function(p){d(p);if(e[p].bIsStarted&&e[p].oInstance){if(o(e[p].oInstance.onStop)){e[p].oInstance.onStop()}e[p].oInstance.__sandbox__.unSubscribeAll();e[p].bIsStarted=n}},instanciate:function(r){var q=m,p=m;d(r);q=l.build(e[r].sSandBoxType);p=e[r].fpCreator(q);if(!i.debugMode){g(p,function(t,s){if(o(t)){p[s]=a(t,p,'Error in module "'+r+'" executing method "'+s+'": ')}})}p.__sandbox__=q;return p},getModules:function(){return e},SandBox:l,ErrorHandler:k};j.TinyCore=i;if(j.define){define("TinyCore",i)}}(this));