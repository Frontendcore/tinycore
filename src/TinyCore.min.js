(function(j){var h=true,n=false,m=null;var f=function(p,o){return p.hasOwnProperty(o)};var d=function(o,p){return Object.prototype.toString.call(o)==="[object "+p+"]"};var a=function(r,p){var o=m,q="";r=r||{};for(q in p){if(f(p,q)){o=p[q];if(d(o,"Object")){o=a(r[q],o)}r[q]=o}}return r};var k={log:function(o){j.console&&j.console.error(o)}};var l=(function(){var s={};var p=0;var r={};var o={};var q=function(t){var u=t;return{subscribe:function(y,w){var x=0,v=0,z="";if(d(w,"Function")){y=d(y,"Array")?y:[y];for(x=y.length;v<x;v++){z=y[v];r[z]=r[z]||{};if(!r[z][u]){r[z][u]=w;o[u]=o[u]||[];o[u].push(z)}}}},publish:function(w,x){var v=r[w];if(v){j.setTimeout(function(){var y="";for(y in v){if(f(v,y)){v[y]({type:w,data:x})}}},0)}},unSubscribe:function(w){var w=d(w,"Array")?w:[w],v=w.length,x=m;while(v--){x=r[w[v]];if(x&&x[u]){delete x[u]}}},unSubscribeAll:function(){if(o[u]){this.unSubscribe(o[u])}}}};return{create:function(t){return a(q(++p),s[t]||{})},register:function(u,t){if(!s[u]){s[u]=t;return h}return n}}}());var c={};var b=function(o){if(!c[o]){throw new Error('Module "'+o+'" is not registered!')}};var e=function(r,o){var q="",p=m;for(q in o){if(f(o,q)){p=o[q];if(d(p,"Function")){o[q]=(function(t,s){return function(){try{s.apply(o,Array.prototype.slice.call(arguments,0))}catch(u){TinyCore.ErrorHandler.log('Error in module "'+r+'" executing method "'+t+'": '+u.message)}}}(q,p))}else{if(d(p,"Object")){e(r,p)}}}}};var g=function(q){var p=l.create(c[q].sSandBoxType),o=c[q].fpCreator(p);if(!TinyCore.debugMode){e(q,o)}o.__sandbox__=p;return o};var i={version:"0.1.0",debugMode:n,extend:function(o){a(this,o)},register:function(q,o,p){if(!c[q]){c[q]={fpCreator:o,sSandBoxType:p||"",oInstance:m,bIsStarted:n};return h}return n},start:function(p,o){b(p);if(!c[p].bIsStarted){if(!c[p].oInstance){c[p].oInstance=this.instanciate(p)}c[p].oInstance.onStart(o);c[p].bIsStarted=h}},stop:function(o){b(o);if(c[o].bIsStarted&&c[o].oInstance){if(d(c[o].oInstance.onStop,"Function")){c[o].oInstance.onStop()}c[o].oInstance.__sandbox__.unSubscribeAll();c[o].bIsStarted=n}},instanciate:function(o){b(o);return g(o)},getModules:function(){return c},SandBox:l,ErrorHandler:k};j.TinyCore=i;if(j.define){define("TinyCore",i)}}(this));